<ng-container *ngTemplateOutlet="showEditMode ? editProfileContainer : profileInfoContainer"></ng-container>

<ng-template #profileInfoContainer>
    <div class="profile">
        <img src="/assets/profile.png" alt="default user">
    
        <h3>User Info:</h3>
        <div class="flex">
            <p>Username: </p>
            <p>{{user.username}}</p>
        </div>
        <div class="flex">
            <p>Email: </p>
            <p>{{user.email}}</p>
        </div>
        <div class="flex">
            <p>Phone: </p>
            <p>{{user.ext}} {{user.tel}}</p>
        </div>
        <button class="edit-button" (click)="toggleEditMode()">Edit</button>
    </div>
</ng-template>

<ng-template #editProfileContainer>
    <div class="profile">
        <img src="/assets/profile.png" alt="default user">
        <h3>User Info:</h3>
        <form [formGroup]="form" (ngSubmit)="saveNewInfo()">
            <div class="flex">
                <p>Username: </p>
                <input type="text" formControlName="username" id="username">
            </div>
            <ng-container *ngIf="form.get('username')?.touched || formSubmited">
                <p *ngIf="form.get('username')?.errors?.['required']" class="error">
                  Username is required!
                </p>
                <p *ngIf="form.get('username')?.errors?.['minlength']" class="error">
                  Username should be longer than 5 chars
                </p>
              </ng-container>
            <div class="flex">
                <p>Email: </p>
                <input type="email" formControlName="email" id="email">
            </div>
            <ng-container *ngIf="form.get('email')?.touched || formSubmited">
                <p *ngIf="form.get('email')?.errors?.['required']" class="error">Email is required!</p>
                <p *ngIf="form.get('email')?.errors?.['appEmailValidator']" class="error">Email is not valid!</p>
            </ng-container>
            <div class="flex">
                <p>Phone: </p>
                <div>
                    <label for="tel"></label>
                     <select name="select-tel" id="select-tel" class="tel" formControlName="ext">
                        <option value="+359">+359</option>
                        <option value="+358">+358</option>
                    </select>
                    <input type="text" formControlName="tel" id="tel">
                </div>
            </div>



            <!-- <div *ngFor="let address of addressesArray.controls; let i = index" formArrayName="addresses">
                <ng-container [formGroupName]="i">
                    <input type="text" formControlName="postCode">
                    <input type="text" formControlName="street">
                </ng-container>
            </div>
            <button (click)="addNewAddress()">+</button> -->


            <button class="red-button" type="button" (click)="toggleEditMode()">Cancel</button>
            <button class="green-button" type="submit" [disabled]="form.invalid">Save</button>
        </form>
    </div>
</ng-template>